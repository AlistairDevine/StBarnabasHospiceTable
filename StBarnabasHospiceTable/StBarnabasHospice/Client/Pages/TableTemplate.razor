<!--onclick removed for testing purposes-->
<!--Template component tutorial review needed to ensure no missed takes have been made.-->

<div class="container-fluid border border-primary" style="text-align:center; width: 100%; height:600px">
    <Split>
        <SplitPane SizeInPercentage="33" MinSize="0">
            <Split Direction="@SplitDirection.Vertical" GutterSize="5">
                <SplitPane MinSize="0">
                    @if (displayButtons?[0] == true)
                    {
                        <div class="container-pane">
                            <a class="oi oi-plus btn button" aria-hidden="true" style="border-radius:35%; padding:50px" @onclick="displayButtonOne"></a>
                        </div>
                    }
                    else if (displayButtons[0] == false)
                    {
                        <img class="PaneImage ImageOne" placeholder="display panel one" alt="Panel one image" src="/@PaneOne" />
                    }
                </SplitPane>
                <SplitPane MinSize="0">
                    @if (displayButtons?[1] == true)
                    {
                        <div class="container-pane">
                            <a class="oi oi-plus btn button" aria-hidden="true" style="border-radius:35%; padding:50px" @onclick="displayButtonTwo"></a>
                        </div>
                    }
                    else
                    {
                        <img class="PaneImage ImageTwo" placeholder="display panel two" alt="Panel one image" src="/@PaneTwo" />
                    }
                </SplitPane>
            </Split>
        </SplitPane>
        <SplitPane SizeInPercentage="33" MinSize="0">
            <Split Direction="@SplitDirection.Vertical" GutterSize="5">
                <SplitPane MinSize="0">
                    @if (displayButtons[2] == true)
                    {
                        <div class="container-pane">
                            <a class="oi oi-plus btn button" aria-hidden="true" style="border-radius:35%; padding:50px" @onclick="displayButtonThree"></a>
                        </div>
                    }
                    else
                    {
                        <img class="PaneImage ImageThree" placeholder="display panel three" alt="Panel one image" src="/@PaneThree" />
                    }
                </SplitPane>
                <SplitPane MinSize="0">
                    @if (displayButtons[3] == true)
                    {
                        <div class="container-pane">
                            <a class="oi oi-plus btn button" aria-hidden="true" style="border-radius:35%; padding:50px" @onclick="displayButtonFour"></a>
                        </div>
                    }
                    else
                    {
                        <img class="PaneImage ImageTwo" placeholder="display panel one" alt="Panel one image" src="/@PaneFour" />
                    }
                </SplitPane>
            </Split>
        </SplitPane>
        <SplitPane SizeInPercentage="33" MinSize="0">
            <Split Direction="@SplitDirection.Vertical" GutterSize="5">
                <SplitPane MinSize="0">
                    @if (displayButtons[4] == true)
                    {
                        <div class="container-pane">
                            <a class="oi oi-plus btn button" aria-hidden="true" style="border-radius:35%; padding:50px" @onclick="displayButtonFive"></a>
                        </div>
                    }
                    else
                    {
                        <img class="PaneImage ImageThree" placeholder="display panel three" alt="Panel one image" src="/@PaneFive" />
                    }
                </SplitPane>
                <SplitPane MinSize="0">
                    @if (displayButtons[5] == true)
                    {
                        <div class="container-pane">
                            <a class="oi oi-plus btn button" aria-hidden="true" style="border-radius:35%; padding:50px" @onclick="displayButtonSix"></a>
                        </div>
                    }
                    else
                    {
                        <img class="PaneImage ImageThree" placeholder="display panel three" alt="Panel one image" src="/@PaneSix" />
                    }
                </SplitPane>
            </Split>
        </SplitPane>
    </Split>
</div>

@if (imagePopup == true)
{
    <!--TODO : time delay on loading data from database causing error of null reference in Items model-->
    @if (Items != null)
    {
        <EditForm Model="@Items" OnValidSubmit="@ValidSubmit">
            <DataAnnotationsValidator />

            <div class="modal" tabindex="-1" style="display:block" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title"> Select image </h3>
                            <p>@runningCount</p>
                            <!--Button to close the popup-->
                            <a type="button" class="close oi oi-circle-x" aria-hidden="true" @onclick="ClosePopup"></a>
                        </div>
                        <div class="modal-body">
                            <!--Selection options dropdown list-->
                            <InputSelect id="image" type="text" @bind-Value="ModelImage">
                                @foreach (var item in Items)
                                        {
                                    <option value="@item.Id">@item.Name</option>
                                        }
                            </InputSelect>
                            <ValidationMessage For="@(() => Items[0].Image)" />
                        </div>
                        <div class="modal-footer" style="text-align:center">
                            <button type="submit" class="oi oi-circle-check" aria-hidden="true"> Select </button>
                        </div>
                    </div>
                </div>
            </div>
        </EditForm>

    }
    else
    {
        <p>Loading data...</p>
    }
}

<style>
    a.button {
        border: 0.1em solid #000000;
        border-radius: 0.12em;
        box-sizing: border-box;
        color: #000000;
    }

        a.button:hover {
            color: #FFFFFF;
            background-color: #000000;
        }

    .container-pane {
        padding: 70px 0;
        vertical-align: middle
    }
</style>

@code {
    bool displayButton = true;
    bool[] displayButtons = new bool[] { true, true, true, true, true, true };
    int runningCount = 0;

    bool imagePopup = false;

    //Counter state management
    //TODO : convert into switch statement
    void displayButtonOne()
    {
        runningCount = 1;
        ShowPopup();
    }
    void displayButtonTwo()
    {
        runningCount = 2;
        ShowPopup();
    }
    void displayButtonThree()
    {
        runningCount = 3;
        ShowPopup();
    }
    void displayButtonFour()
    {
        runningCount = 4;
        ShowPopup();
    }
    void displayButtonFive()
    {
        runningCount = 5;
        ShowPopup();
    }
    void displayButtonSix()
    {
        runningCount = 6;
        ShowPopup();
    }

    void CloseButton()
    {
        switch (runningCount)
        {
            case 1:
                displayButtons[0] = false;
                Console.WriteLine("Button one works");
                break;
            case 2:
                displayButtons[1] = false;
                Console.WriteLine("Button two works");
                break;
            case 3:
                displayButtons[2] = false;
                Console.WriteLine("Button three works");
                break;
            case 4:
                displayButtons[3] = false;
                Console.WriteLine("Button four works");
                break;
            case 5:
                displayButtons[4] = false;
                Console.WriteLine("Button five works");
                break;
            case 6:
                displayButtons[5] = false;
                Console.WriteLine("Button six works");
                break;
        }
        if (runningCount == 1)
        {
            displayButtons[0] = false;
        }
    }
    //TODO : re-show button to change the item object inside the pane
    void ShowButton()
    {
        displayButton = true;
    }

    void ClosePopup()
    {
        imagePopup = false;
        runningCount = 0;
    }
    void ShowPopup()
    {
        imagePopup = true;
    }

    void ValidSubmit()
    {
        CloseButton();
        ClosePopup();
        SelectPane();
    }

    [Parameter] public List<Item> Items { get; set; } = new List<Item>();
    string ModelImage = "";
    //TODO : place string into list<string>, not just six different strings
    public string PaneOne = "Images/noEdit.png";
    public string PaneTwo = "Images/yesEdit.png";
    public string PaneThree = "Images/noEdit.png";
    public string PaneFour = "Images/yesEdit.png";
    public string PaneFive = "Images/noEdit.png";
    public string PaneSix = "Images/yesEdit.png";

    //TODO : Create selection pane method, public string SelectPane(List<string> PaneSoruce) if statements
    void SelectPane()
    {

    }
}